<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>404 ‚Äì Page Not Found</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Segoe UI", Tahoma, Arial, sans-serif;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      color: #fff;
    }

    .container {
      text-align: center;
      padding: 40px 25px;
      max-width: 500px;
      width: 100%;
    }

    .error-code {
      font-size: 110px;
      font-weight: 800;
      letter-spacing: 4px;
      opacity: 0.9;
    }

    .error-title {
      font-size: 26px;
      margin-top: 10px;
      font-weight: 600;
    }

    .error-text {
      margin-top: 15px;
      font-size: 16px;
      opacity: 0.9;
      line-height: 1.6;
    }

    .actions {
      margin-top: 30px;
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .btn {
      text-decoration: none;
      padding: 12px 22px;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .btn-home {
      background: #ffffff;
      color: #1e3c72;
    }

    .btn-home:hover {
      background: #f1f1f1;
    }

    .btn-back {
      background: rgba(255,255,255,0.2);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.4);
    }

    .btn-back:hover {
      background: rgba(255,255,255,0.35);
    }

    footer {
      margin-top: 40px;
      font-size: 13px;
      opacity: 0.7;
    }

    @media (max-width: 480px) {
      .error-code {
        font-size: 90px;
      }
      .error-title {
        font-size: 22px;
      }
    }
  </style>
</head>

<body>

  <div class="container">
    <div class="error-code">404</div>
    <div class="error-title">Page Not Found</div>
    <p class="error-text">
      Sorry, the page you‚Äôre looking for doesn‚Äôt exist or has been moved.
    </p>

    <div class="actions">
      <a href="/" class="btn btn-home">üè† Go Home</a>
      <a href="javascript:history.back()" class="btn btn-back">‚Ü© Go Back</a>
    </div>

    <footer>
      ¬© <span id="year"></span> Your Website. All rights reserved.
    </footer>
  </div>

  <script>
    document.getElementById("year").innerText = new Date().getFullYear();
  </script>
<script type="module">
/* ===============================
   FIREBASE IMPORTS
================================ */
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getDatabase, ref, get, runTransaction } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-database.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-analytics.js";

/* ===============================
   FIREBASE CONFIG
================================ */
const firebaseConfig = {
  apiKey: "AIzaSyAq7NeNLiZYobBVvjD7RMeLP7yyq57hWKw",
  authDomain: "advertisement-86114.firebaseapp.com",
  databaseURL: "https://advertisement-86114-default-rtdb.firebaseio.com",
  projectId: "advertisement-86114",
  storageBucket: "advertisement-86114.firebasestorage.app",
  messagingSenderId: "805405982197",
  appId: "1:805405982197:web:2b19eb58607094aa29f4bc",
  measurementId: "G-HBG65CH3D0"
};

/* ===============================
   INIT FIREBASE
================================ */
const app = initializeApp(firebaseConfig);
getAnalytics(app);
const db = getDatabase(app);

/* ===============================
   AD POPUP
================================ */
(async function showAdPopup() {
  try {
    const adsRef = ref(db, "advertisements");
    const snapshot = await get(adsRef);
    const data = snapshot.val();

    if (!data || !data.enabled || !data.images) return;

    const ads = Object.entries(data.images);
    if (!ads.length) return;

    // Pick random ad
    const [adId, ad] = ads[Math.floor(Math.random() * ads.length)];

    /* ===============================
       TRACK IMPRESSION
    ================================ */
    const impressionsRef = ref(db, `advertisements/images/${adId}/impressions`);
    runTransaction(impressionsRef, current => (current || 0) + 1);

    /* ===============================
       OVERLAY
    ================================ */
    const overlay = document.createElement("div");
    overlay.style.cssText = `
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.65);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:999999;
      padding:16px;
    `;

    /* ===============================
       AD BOX
    ================================ */
    const box = document.createElement("div");
    box.style.cssText = `
      background:#000;
      border-radius:18px;
      width:100%;
      max-width:420px;
      max-height:85vh;
      position:relative;
      overflow:hidden;
      box-shadow:0 30px 60px rgba(0,0,0,.7);
      cursor:pointer;
    `;

    /* ===============================
       IMAGE
    ================================ */
    const img = document.createElement("img");
    img.src = ad.imageUrl;
    img.alt = "Advertisement";
    img.style.cssText = `
      width:100%;
      height:auto;
      max-height:85vh;
      object-fit:contain;
      display:block;
    `;

    /* ===============================
       CLOSE BUTTON
    ================================ */
    const closeBtn = document.createElement("button");
    closeBtn.textContent = "√ó";
    closeBtn.style.cssText = `
      position:absolute;
      top:10px;
      right:10px;
      width:34px;
      height:34px;
      border:none;
      border-radius:50%;
      background:rgba(0,0,0,.6);
      color:#fff;
      font-size:20px;
      cursor:pointer;
      z-index:2;
    `;

    /* ===============================
       EVENTS
    ================================ */
    closeBtn.onclick = e => {
      e.stopPropagation();
      overlay.remove();
    };

    box.onclick = async () => {
      const clicksRef = ref(db, `advertisements/images/${adId}/clicks`);
      await runTransaction(clicksRef, current => (current || 0) + 1);

      if (ad.linkUrl) window.open(ad.linkUrl, "_blank");
      overlay.remove();
    };

    overlay.onclick = () => overlay.remove();
    box.onclick = e => e.stopPropagation();

    /* ===============================
       BUILD
    ================================ */
    box.appendChild(img);
    box.appendChild(closeBtn);
    overlay.appendChild(box);
    document.body.appendChild(overlay);

  } catch (err) {
    console.error("Ad error:", err);
  }
})();
</script>
</body>
</html>
